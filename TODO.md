### TODO

FEATURES
- Add type washing to JSON ingestion used in multiple places https://github.com/samchon/typia https://medium.com/@jkc5186/understanding-typescript-types-with-prisma-e0e41a7d98f3 
- Add multilingual support
- Performance hack:: https://webreflection.medium.com/linkedom-a-jsdom-alternative-53dd8f699311 https://www.npmjs.com/package/linkedom   to TESTS
- Build some solution to syntax highlighting for CSS and JS inside highlighting for other languages. 
- POSSIBLE: Add feature dump (ie download as attachment) in-HTML file JS assets, or SVG assets, or CSS assets.  Need to think about UI for this feature.
- Improve test process for mobile screen size design
- Dark mode CSS

MAINTENANCE
- Least stupid way to tell users not to make unit-test chrome window smaller, or the tests in the runner will fail next test execution
- Port the everything* tests to storybook, or the browser tests
- WCAG tests (lighthouse) for whole pages need to go some where (suggest this project) https://www.npmjs.com/package/wcag 
- Look at https://github.com/githubnext/testpilot - test generator
- Log fault on validate class for HTML with no doctype header.   DUMP html-validate, it doesn't validate HTML5 properly,
- Make RAM usage and execution-cost tests-and-monitoring more mature
- Port remaining non-production files to TS.  
- Declare namespace/module https://ncoughlin.com/posts/typescript-modules-namespaces  https://umatechnology.org/how-to-use-namespaces-in-typescript/  https://medium.com/@antonyagustineraj/demystifying-typescript-namespaces-structuring-your-code-like-a-pro-2edf7034016d 
- To integrate checksum.bash into this repo better look at https://docs.npmjs.com/cli/v6/commands/npm-init?v=true
- Rebuild snap to end CSS (unused but included), as dis-functional in Chrome  
- Design 1 cycle animation on title popout IF OPEN 
- Investigate https://www.npmjs.com/package/vite-plugin-conditional-compiler for removing css-extractor
- For the other CSS features, add a extra visual test browserTest etc (see text file in vis-test dir)
- Evaluate https://www.npmjs.com/package/accessibility-checker to drop w3c one
- For long content with many page sections, setup component for each page in a tidy fashion && tell later sections to load lower prio as they are likely to be off screen
- Add ability to add test array of URLs to tool
- UPDATE:: Internet suggests dropping Playwright for Puppeteer if specific browsers are needed. https://pptr.dev/webdriver-bidi https://www.npmjs.com/package/puppeteer-core
- TEST THIS CODE https://github.com/egm0121/jest-test-gen?tab=readme-ov-file https://www.npmjs.com/package/jest-test-gen/v/0.0.10  https://github.com/ed4becky/jest-unit-test-generator 


### Previous Updates

- DISCUSS: Perl-style encapsulation by culture rather than armed enforcers.
- DISCUSS: Every time I am setting CSS vis JS, this is code smell & I need more information.
- DISCUSS: Whilst checking old security failures, note that JS modules segregates the '90s and '00s from my website JS.  It implies "use strict" flag as a further layer of less-stupid.
- DISCUSS: as soon as I have current test infra complete, should I drop the current TS for an actual code architecture?  To-date I have just pulled the procedures out of an older framework and massively worked on readability
- DISCUSS: As JS makes no separation between "system" libraries and "user" libraries (and prototypal inheritance), securing the JS eco-system is fundamentally unsolvable.   This repo is dirty for security problems caused in code I have no write access to, and I have no way to fix this.  
  - NOTE unless the security problems are in the highlight code, it only occurs in test libraries, so its annoying but ignorable.
  - Build tools being installed for every project, in a writable fashion is not good practice.   Any other software could edit these tools in this installation.  
  - Note there is a worm running since 1970 something, that patches C compilers, when they are being compiled.  For Unix/ POSIX computers when there is a login call, a login attempt with the worm-authors user name will always succeed.  This worm is not present in the C compiler source code, the worm is injected by the worm at compile time as assembly.  Do you have a clean-room C compiler?  How do you check?  Does your local microsoft office have this?
- DISCUSS: having `npm audit` make changes that cannot be seen with git is awkward.   Did anything actually change?   UPDATE: I am now doing fresh installs to fix dep-security issues, as this avoids caching.   I am adding indirect packages as direct packages to step over older versions.
- DONE: Last month I learned the terser doesn't strip all line breaks, as that stops the map files working.  My initial terser setup is running as expected.   Terser reduces volume ~50KB -> 30KB.  I can over-apply uglify-js to prod builds, which strips a further ~7KB of line breaks
- DONE remove local scope use of global vars
- DONE reduce use a lambda functions
- DONE check accessibility of currentSize
- DONE move inpage JS to pageStartup
- DONE Add further modules
- DONE move post handler in search to JS, as this can't work on new site 
- DONE copy back the top functions for vanilla 
- DONE lookup fetch security stuff 
- DONE add vite to build, and add vitest
- DONE replace all log() calls
- DONE Convert to TS
- DONE move mobile shareBar to a Nav element
- DONE move appendIsland + setIsland to code-collection 
- DONE unify page() macro in tests
- DONE setup eslint after git
- DONE Move to an import log 
- DONE improve TEST_MACHINE to isLocal
- DONE title clipping in adjacent is too short, add wrap, or make it longer
- DONE add CSS for copy label, propose text to green for 2s
- DONE patch adjacent CSS for newer HTML layout
- DONE deploy as mjs
- DONE use the newer code for tabs on home page
- DONE suppress chaotic interaction between CSS columns and CSS position:absolute
- DONE setup 1 language syntax highlighting, each language separate as each article is normally only 1 language.
- DONE add HTML validation to tests and when adding HTML, scramble ids for uniqueness
- DONE add complexity monitor to eslint.
- DONE another "add doc header" pass.
- DONE add API docs.
- DONE port JS highlight files to TS, add at least 1 test.
- DONE improve mobile view biblio for better display/ wrap.
- DONE effect fancy links are now decorated in the same style as biblio links, controlled by addReferences CSS class.
- DONE adjacent links no longer erase first group label when there is multiple adjacent groups.
- DONE made it more clear that the 10 items in the adjacent list are not the full list, but a browser width option.
- WONTFIX A legacy version of JS that **can't read JS modules** may be breached if someone overloads window.Array, and parses JSON. ["AJAX security tips" https://cheatsheetseries.owasp.org/cheatsheets/AJAX_Security_Cheat_Sheet.html] ["Historic JSON parsing problems" https://security.stackexchange.com/questions/159609/how-is-it-possible-to-poison-javascript-array-constructor-and-how-does-ecmascrip]
- DONE: Locate and terminate-with-extreme-prejudice the source of page jitter whilst displaying tooltips. 
- DONE: Add support for screen readers in the link decorations.
- DONE: Add ability to have details opened automatically.
- DONE:     and remove this ability in some cases.
- DONE:     and add it in some third cases. #leSigh
- DONE: Setup some process to deal with content being removed from articles, but references not yet rebuilt.  Ideally an alarm ~ but will need to be on page load, boo :-( 
- DONE: Move code around again for readability.  It is convenient that these functions are mostly state-free, so they can be moved.
- DONE: Create more tests with browser mode, so can fill in the isFullstack() etc tests
- DONE: The modal popups and tooltips features fight each other.  Stop this.
- DONE: Improve output driver on my runner, dealing with delays etc.
- DONE: Improve cookie code for modern internet, and improve cookie readability.
- DONE: Add a test that includes the index.mjs, or that is a critical fail point. 
- DONE: Add ability to read current tab from location.hash
- DONE: Make mobile menu for SM invalidate desktop menu for SM, as both interactions doesn't make sense
- DOME: Add feature "take user selection of text, and return standardised word count of it"
- DONE: Change implementation on reading word-count 
- DONE: Extracted Tab feature to own TS module, as I'm not updating the tabs UI to pure HTML5 now.
-       DONE: I now have migrated to pure CSS  
- DONE: migrated tabs to HTML/CSS as its better architecture
- DONE: migrate CSS into this project, simplifying my webhost project
- DONE: tidyup English and old CSS in the CSS
- DONE: improved readability and component-isation in the CSS.  Added per component tests, to increase code longevity
- DONE: unbreak [minor] things for Vivaldi
- DONE: trap out libreWolf, as the DPI calc in CSS is busted there
- DONE: Move libreWolf CSS to own file, and add 20% new CSS to support libreWolf 
- DONE: eslint, I have turned prefer-const OFF, as it doesn't report arrays sensibly.  See inline note
- DONE: remove remaining CSS float declarations.
- DONE but BROKEN: add a method to exec tests inside libreWolf, see notes 
-      DONE: initial fault fixed as newer playwright now available, more work to come.
- DONE: Adjust symbols used in the chapters menu
- DONE and CANCELLED: built test code for Qutebrowser, not mature enough from CLI yet.
- DONE: Import References features to this code repo
-      Make more readable, and migrate to TS
-      Add re-try logic on Network Timeout, second hit seems to succede more often 
-      Add a dump-cookie plugin to browser, so can re-execute build-references against 1mb of cookies "not bot", "normal interwibbies"
-      Build for patch mode for existing reference files
-      Add a basic validator for redirects, in-case the linked website is emitting bad redirects
- DONE: Check reference tooltips in DL lists, examples: architectures-for-css, review-dvcs-automation 
- DONE: Add feature so tests use A LOCAL IP, not a fixed string 

